<?xml version="1.0" encoding="UTF-8" ?>
<!-- $Header: DATA_TEMPLATE_XXSC_XXSC_BRIO_BALANCE_SUMMARY.xml 115.0 2016/05/23 09:25:40 xdouser noship $ -->
<!-- dbdrv: none -->
<!-- GSCC_Category="Xdo Data Definition" -->

<dataTemplate name="XXSC_HR_EMP_DETAILS" defaultPackage="XXSC_HR_PKG" version="1.0">
<properties>
<property name="xml_tag_case" value="upper" /> 
</properties>
<parameters>
  <parameter name="P_CONC_REQUEST_ID" dataType="NUMBER" /> 
  <parameter name="P_LEDGER_ID" dataType="NUMBER" />
  <parameter name="P_PERIOD"    dataType="VARCHAR2" />
  </parameters>
  <lexicals /> 
 <dataQuery>
<sqlStatement name="Q_INV_DETAILS">
<![CDATA[  
SELECT   GCC.SEGMENT4 ||'-'|| GCC.SEGMENT5 "ACCT_SUBACCT" ,
ACCOUNT_CLASS.CLASS "ACCOUNT_CLASS",
  MC_SC.LEVEL_2 "MC_ID",
  MC_SC.LEVEL_2_DESC "MC_NAME",
  MC_SC.LEVEL_3 "SUBCAT_ID",
  MC_SC.LEVEL_3_DESC "SUBCAT_NAME",
  ACCOUNT_CLASS.SEGMENT_DESC "ACC_NAME",
  GCC.SEGMENT4 "ACC_ID",
  GCC.SEGMENT5 "SUBACCT_ID",
  (SELECT DESCRIPTION SEGMENT_DESC
  FROM FND_FLEX_VALUES_VL
  WHERE FLEX_VALUE_SET_ID =
    (SELECT FLEX_VALUE_SET_ID
    FROM FND_FLEX_VALUE_SETS
    WHERE FLEX_VALUE_SET_NAME='XXGL_AFF_SUBACCOUNT'
    )
  AND FLEX_VALUE=GCC.SEGMENT5
  ) "SUBACCT_NAME",
    gb.currency_code CURRENCY_CODE,
  SUM(( NVL(GB.PERIOD_NET_DR,0) + NVL(GB.BEGIN_BALANCE_DR,0))) - SUM(NVL(GB.PERIOD_NET_CR,0)+NVL(GB.BEGIN_BALANCE_CR,0))  "CLOSINGBALANCE_BC" 
FROM GL_BALANCES GB,
  GL_CODE_COMBINATIONS GCC 
  ,
  (SELECT DECODE( SUBSTR(REPLACE(COMPILED_VALUE_ATTRIBUTES,chr(10),''),3,1) ,'A','Asset' ,'E','Expense' ,'L','Liability' ,'O','Ownership/Stockholder''s Equity' ,'R','Revenue' , SUBSTR(REPLACE(COMPILED_VALUE_ATTRIBUTES,CHR(10),''),3,1)) CLASS ,
    DESCRIPTION SEGMENT_DESC ,
    FLEX_VALUE SEGMENT4
  FROM FND_FLEX_VALUES_VL
  WHERE FLEX_VALUE_SET_ID = 1016230
  ) ACCOUNT_CLASS ,
(SELECT FFVL.FLEX_VALUE SEGMENT4 ,
  FFVL.DESCRIPTION,
  FFVNH.PARENT_FLEX_VALUE LEVEL_3,
  FFVL3.DESCRIPTION LEVEL_3_DESC,
  FFVNH3.PARENT_FLEX_VALUE LEVEL_2,
  FFVL2.DESCRIPTION LEVEL_2_DESC
FROM FND_FLEX_VALUES_VL FFVL ,
  FND_FLEX_VALUE_NORM_HIERARCHY FFVNH,
  FND_FLEX_VALUE_NORM_HIERARCHY FFVNH3,
  FND_FLEX_VALUES_VL FFVL3,
FND_FLEX_VALUES_VL FFVL2
WHERE FFVL.FLEX_VALUE_SET_ID = FFVNH.FLEX_VALUE_SET_ID
AND FFVL3.FLEX_VALUE_SET_ID  = FFVNH3.FLEX_VALUE_SET_ID
AND FFVNH.FLEX_VALUE_SET_ID  = FFVNH3.FLEX_VALUE_SET_ID
AND FFVL.FLEX_VALUE BETWEEN FFVNH.CHILD_FLEX_VALUE_LOW AND FFVNH.CHILD_FLEX_VALUE_HIGH
AND FFVNH.PARENT_FLEX_VALUE BETWEEN FFVNH3.CHILD_FLEX_VALUE_LOW AND FFVNH3.CHILD_FLEX_VALUE_HIGH
AND FFVNH.PARENT_FLEX_VALUE = FFVL3.FLEX_VALUE
AND FFVNH3.PARENT_FLEX_VALUE = FFVL2.FLEX_VALUE
AND FFVL.HIERARCHY_LEVEL    ='4'
AND FFVL3.HIERARCHY_LEVEL   ='3'
AND FFVNH.FLEX_VALUE_SET_ID = 1016230) MC_SC,
gl_ledgers GL
WHERE GCC.CODE_COMBINATION_ID = GB.CODE_COMBINATION_ID(+)
AND ACCOUNT_CLASS.SEGMENT4(+) = GCC.SEGMENT4
AND GCC.SEGMENT4 = MC_SC.SEGMENT4(+)
AND GL.LEDGER_ID(+) = gb.ledger_id
AND gl.currency_code(+) = gb.currency_code
AND GB.ACTUAL_FLAG<>'E'
--AND GB.account_type<>'E'
--AND GB.CURRENCY_CODE(+) ='AED'
AND GB.PERIOD_NAME = :P_PERIOD --'DEC-14'  --
  --AND GJH.STATUS      = 'P'-- P for Posted, U for Unposted
AND GL.LEDGER_ID = :P_LEDGER_ID
GROUP BY GCC.SEGMENT4 ,
  GCC.SEGMENT5   ,
  ACCOUNT_CLASS.CLASS ,
  ACCOUNT_CLASS.SEGMENT_DESC ,
  MC_SC.LEVEL_2 ,
  MC_SC.LEVEL_2_DESC ,
  MC_SC.LEVEL_3 ,
  MC_SC.LEVEL_3_DESC ,
  gb.currency_code
  order by ACCOUNT_CLASS.CLASS,
    TO_NUMBER(MC_SC.LEVEL_2) ,
    TO_NUMBER(MC_SC.LEVEL_3) ,
    TO_NUMBER(GCC.SEGMENT4) ,
    TO_NUMBER(GCC.SEGMENT5)
  ]]> 
  </sqlStatement>
  </dataQuery>
  <dataStructure>
<group name="G_EMP_DETAILS_GROUP" dataType="varchar2" source="Q_INV_DETAILS">
  <element name="ACCOUNT_CLASS"   dataType="VARCHAR2"    value="ACCOUNT_CLASS"/>
  <element name="MC_ID"   dataType="VARCHAR2"    value="MC_ID"/>
  <element name="MC_NAME"   dataType="VARCHAR2"    value="MC_NAME"/>
  <element name="SUBCAT_ID"   dataType="VARCHAR2"    value="SUBCAT_ID"/>
  <element name="SUBCAT_NAME"   dataType="VARCHAR2"    value="SUBCAT_NAME"/>
  <element name="ACC_ID"   dataType="VARCHAR2"    value="ACC_ID"/>
  <element name="ACC_NAME"   dataType="VARCHAR2"    value="ACC_NAME"/>
  <element name="SUBACCT_ID"   dataType="VARCHAR2"    value="SUBACCT_ID"/>
  <element name="SUBACCT_NAME"   dataType="VARCHAR2"    value="SUBACCT_NAME"/>
  <element name="CLOSINGBALANCE_BC"   dataType="NUMBER"    value="CLOSINGBALANCE_BC"/>
  <element name="STATUS"   dataType="VARCHAR2"    value="STATUS"/>
  <element name="ACCT_SUBACCT"   dataType="VARCHAR2"    value="ACCT_SUBACCT"/>
  <element name="CURRENCY_CODE"   dataType="VARCHAR2"    value="CURRENCY_CODE"/>
</group>
  <element name="CURRENT_DATE"			dataType="date"		value="XXSC_HR_PKG.GET_CURRENT_DATE" /> 
  <element name="COMPANY_P"		        dataType="varchar2" value="XXSC_HR_PKG.GET_OPERATING_UNIT_PARAM" /> 
  <element name="LEDGER_P"		        dataType="varchar2" value="XXSC_HR_PKG.GET_LEDGER_PARAM" /> 
  </dataStructure>
   </dataTemplate>