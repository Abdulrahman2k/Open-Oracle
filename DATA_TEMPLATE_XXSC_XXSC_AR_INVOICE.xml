<?xml version="1.0" encoding="UTF-8" ?>
<!-- $Header: DATA_TEMPLATE_XXSC_XXSC_AR_INVOICE.xml 115.0 2016/05/23 09:25:39 xdouser noship $ -->
<!-- dbdrv: none -->

<dataTemplate name="XXSC_AR_INVOICE" defaultPackage="XXSC_AR_INVOICE_PKG" version="1.0">
<properties>
<property name="xml_tag_case" value="upper" /> 
</properties>
<parameters>
  <parameter name="P_CONC_REQUEST_ID" dataType="number" /> 
  <parameter name="P_CUSTOMER_TRX_ID" dataType="number" /> 
  </parameters>
  <lexicals /> 
 <dataQuery>
<sqlStatement name="Q_EMP_DETAILS">
<![CDATA[  
select
RCTA.CUSTOMER_TRX_ID,
RCTA.ORG_ID,
rcta.COMPLETE_FLAG,
RCTA.TRX_NUMBER TRX_NUMBER,
QRSLT.title CONTACT_TITLE, 
QRSLT.party_name  CONTACT_NAME,
Initcap(HP.PARTY_NAME) BILL_TO_CUSTOMER_NAME,
HCA.ACCOUNT_NUMBER,
(select Initcap(Name) FROM ra_terms rt WHERE rt.term_id = RCTA.term_id ) PAYMENT_TERM,
--(select BANK_ACCOUNT_NUM ||' (IBAN # '|| cba.IBAN_NUMBER||' '|| cbbv.bank_name||' '||CBBV.BANK_BRANCH_NAME||' UAE '||CBBV.BANK_BRANCH_TYPE||' Code: '|| CBBV.EFT_SWIFT_CODE||' '|| CBBV.EFT_USER_NUMBER||' )'  from --CE_BANK_ACCOUNTS CBA, CE_BANK_BRANCHES_V CBBV
--where CBA.BANK_BRANCH_ID = CBBV.PK_ID
--and cba.BANK_ACCOUNT_ID=RCTA.INTERFACE_HEADER_ATTRIBUTE8) BANK_ACCOUNT,
BA.BANK_ACCOUNT,
BA.BANK_ACCOUNT_NUM ,
BA.IBAN_NUMBER,
BA.BANK_NAME,
BA.BANK_BRANCH_NAME,
BA.BANK_BRANCH_TYPE,
BA.EFT_SWIFT_CODE,
BA.EFT_USER_NUMBER,
TO_CHAR(RCTA.TRX_DATE,'DD-MON-RRRR') TRX_DATE,
TO_CHAR(RCTA.TERM_DUE_DATE,'DD-MON-RRRR') TERM_DUE_DATE,
INVOICE_CURRENCY_CODE  INVOICE_CURRENCY_CODE, 
(SELECT upper(FLV.MEANING)  FROM RA_CUST_TRX_TYPES_ALL RCTTA
 ,  GL_SETS_OF_BOOKS GSOB
 ,  FND_LOOKUP_VALUES flv
    WHERE 
    rctta.TYPE = FLV.LOOKUP_CODE
    AND GSOB.SET_OF_BOOKS_ID = RCTTA.SET_OF_BOOKS_ID
    AND RCTTA.ORG_ID           = RCTA.ORG_ID
    AND RCTTA.CUST_TRX_TYPE_ID = RCTA.CUST_TRX_TYPE_ID
    AND GSOB.SET_OF_BOOKS_ID   = RCTA.SET_OF_BOOKS_ID
    AND FLV.lookup_type = 'INV/CM/ADJ' 
    ) CLASS,
--RCTA.CUST_TRX_TYPE_ID CLASS,
--------SHIP TO
--HP1.PARTY_NAME SHIP_CUST_NAME,
--HCS.LOCATION SHIP_TO_LOC,
--HL.ADDRESS1 SHIP_TO_ADDR1,
--DECODE (HL.CITY,NULL, NULL,HL.CITY || ', ')||
--DECODE (HL.STATE,NULL, HL.PROVINCE || ', ',HL.STATE || ', ')||
--DECODE (HL.POSTAL_CODE, NULL, NULL, HL.POSTAL_CODE || ', ')||
--DECODE (HL.COUNTRY, NULL, NULL, HL.COUNTRY) SHIP_TO_ADDR5,
----------BILL TO
rcta.comments,
HP.PARTY_NAME BILL_CUST_NAME,
HCS1.LOCATION BILL_TO_LOC,
HL1.ADDRESS1 BILL_TO_ADDRESS1,
HL1.ADDRESS2 BILL_TO_ADDR2,
HL1.ADDRESS3 BILL_TO_ADDR3,
HL1.ADDRESS4 BILL_TO_ADDR4,
--HL1.ADDRESS5 BILL_TO_ADDR5,
DECODE (HL1.CITY,NULL, NULL, HL1.CITY || ', ')||
DECODE (HL1.STATE, NULL, HL1.PROVINCE || ', ',HL1.STATE || ', ')||
DECODE (HL1.POSTAL_CODE, NULL, NULL,HL1.POSTAL_CODE || ', ' ) ||
(SELECT MEANING
FROM FND_LOOKUP_VALUES
WHERE LOOKUP_TYPE='GHR_US_POSTAL_COUNTRY_CODE' 
AND LANGUAGE='US'
AND LOOKUP_CODE=HL1.COUNTRY) BILL_TO_ADDR5,
----------REMIT TO
HP.PARTY_NAME REMIT_CUST_NAME,
HCS2.LOCATION REMIT_TO_LOC,
HL2.ADDRESS1 REMIT_TO_ADDR1,
DECODE (HL2.CITY,NULL, NULL, HL1.CITY || ', ')||
DECODE (HL2.STATE, NULL, HL1.PROVINCE || ', ',HL1.STATE || ', ')||
DECODE (HL2.POSTAL_CODE, NULL, NULL,HL1.POSTAL_CODE || ', ' ) ||
DECODE (HL2.COUNTRY, NULL, NULL, HL1.COUNTRY) REMIT_TO_ADDR5,
-------LINES
   RCTL.LINE_NUMBER,
--   MSIB.SEGMENT1 ITEM_NAME,
   RCTL.UOM_CODE,
   RCTL.QUANTITY_INVOICED,
   RCTL.UNIT_SELLING_PRICE,
   RCTL.LINE_TYPE,
   (RCTL.QUANTITY_INVOICED*RCTL.UNIT_SELLING_PRICE)LINE_PRICE,
   DECODE(RCTL.QUANTITY_INVOICED*RCTL.UNIT_SELLING_PRICE,NULL,RCTL.EXTENDED_AMOUNT,
   RCTL.QUANTITY_INVOICED*RCTL.UNIT_SELLING_PRICE)TOTAMT,
   INITCAP(XXSC_SPELL_NUMBER(RCTL.EXTENDED_AMOUNT,'D')) TOTAMT_TEXT,
    ( SELECT 'Y' FROM FND_ATTACHED_DOCS_FORM_VL WHERE USER_ENTITY_NAME='RA_CUSTOMER_TRX' AND to_char(PK1_VALUE) =to_char(RCTA.customer_trx_id) and rownum=1)	ATTACHMENT_EXIST,
	RCTL.DESCRIPTION LINE_DESCRIPTION,
	RCTL.EXTENDED_AMOUNT LINE_AMOUNT
FROM
RA_CUSTOMER_TRX_ALL RCTA,
HZ_PARTIES HP,
HZ_CUST_ACCOUNTS HCA,
--HZ_CUST_SITE_USES_ALL HCS,
--HZ_CUST_ACCT_SITES_ALL HCAS,
--HZ_LOCATIONS HL,
--HZ_PARTY_SITES HPS,
--------------------
(SELECT 
CBA.BANK_ACCOUNT_NUM ||' (IBAN # '|| CBA.IBAN_NUMBER||' '|| CBBV.BANK_NAME||' '||CBBV.BANK_BRANCH_NAME||' UAE '||CBBV.BANK_BRANCH_TYPE||' Code: '|| CBBV.EFT_SWIFT_CODE||' '|| CBBV.EFT_USER_NUMBER||' )'  BANK_ACCOUNT,
CBA.BANK_ACCOUNT_NUM ,
 CBA.IBAN_NUMBER,
 CBBV.BANK_NAME,
 CBBV.BANK_BRANCH_NAME,
 CBBV.BANK_BRANCH_TYPE,
 CBBV.EFT_SWIFT_CODE,
 CBBV.EFT_USER_NUMBER,
 ARMCA.RECEIPT_METHOD_ID
FROM AR_RECEIPT_METHOD_ACCOUNTS_ALL ARMCA , CE_BANK_ACCT_USES_ALL CBAUA, CE_BANK_ACCOUNTS CBA,  CE_BANK_BRANCHES_V CBBV
WHERE  ARMCA.REMIT_BANK_ACCT_USE_ID = CBAUA.BANK_ACCT_USE_ID
AND   CBAUA.BANK_ACCOUNT_ID = CBA.BANK_ACCOUNT_ID
AND    CBA.BANK_BRANCH_ID = CBBV.PK_ID) BA,
HZ_CUST_SITE_USES_ALL HCS1,
HZ_CUST_ACCT_SITES_ALL HCAS1,
HZ_LOCATIONS HL1,
HZ_PARTY_SITES HPS1,
---------------------------
RA_CUSTOMER_TRX_LINES_ALL RCTL,
--MTL_SYSTEM_ITEMS_B MSIB,
HZ_CUST_SITE_USES_ALL HCS2,
HZ_CUST_ACCT_SITES_ALL HCAS2,
HZ_LOCATIONS HL2,
HZ_PARTY_SITES HPS2,
---------------------
--HZ_PARTIES HP1,
--HZ_CUST_ACCOUNTS HCA1,
-------------------------
HZ_PARTIES HP2,
HZ_CUST_ACCOUNTS HCA2,
--------------------------

  (SELECT hcar.CUST_ACCOUNT_ROLE_ID AS CARI,
    hcar.PARTY_ID,
    hcar.CUST_ACCOUNT_ID,
    hcar.CURRENT_ROLE_STATE,
    hcar.CUST_ACCT_SITE_ID,
    hcar.PRIMARY_FLAG,
    hcar.ROLE_TYPE,
    hcar.SOURCE_CODE,
    hcar.ORIG_SYSTEM_REFERENCE,
    hcar.STATUS,
    Initcap(hpsub.person_pre_name_adjunct) TITLE,
    hpsub.PARTY_NAME,
    hps.LOCATION_ID,
    hprel.PRIMARY_PHONE_COUNTRY_CODE,
    hprel.PRIMARY_PHONE_AREA_CODE,
    hprel.PRIMARY_PHONE_NUMBER,
    hprel.PRIMARY_PHONE_EXTENSION,
    hprel.PRIMARY_PHONE_LINE_TYPE,
    hprel.EMAIL_ADDRESS,
    hoc.JOB_TITLE,
    hps.MAILSTOP,
    ftv.TERRITORY_SHORT_NAME  AS COUNTRY,
    hps.ORIG_SYSTEM_REFERENCE AS PS_REFERENCE,
    hpsub.PARTY_ID            AS SUB_PARTY_ID,
    hpsub.PARTY_TYPE,
    hprel.PARTY_ID AS REL_PARTY_ID,
    hr.RELATIONSHIP_ID,
    lookups.meaning JOB_TITLE_CODE,
    hoc.contact_number ,
    HZ_UTILITY_V2PUB.get_lookupmeaning ( 'FND_LOOKUP_VALUES' , 'HZ_CPUI_REGISTRY_STATUS' , hcar.STATUS ) AS CONTACT_STATUS_MEANING
  FROM HZ_CUST_ACCOUNT_ROLES hcar,
    HZ_PARTIES hpsub,
    HZ_PARTIES hprel,
    HZ_ORG_CONTACTS hoc,
    HZ_RELATIONSHIPS hr,
    HZ_PARTY_SITES hps,
    FND_TERRITORIES_VL ftv,
    fnd_lookup_values_vl lookups,
    hz_cust_accounts act
  WHERE -- hcar.CUST_ACCOUNT_ID                    = :1 --1111 MENACORP  AND 
  hcar.ROLE_TYPE                            = 'CONTACT'
  AND hcar.PARTY_ID                             = hr.PARTY_ID
  AND hr.PARTY_ID                               = hprel.PARTY_ID
  AND hr.SUBJECT_ID                             = hpsub.PARTY_ID
  AND hoc.PARTY_RELATIONSHIP_ID                 = hr.RELATIONSHIP_ID
  AND hcar.cust_account_id                      =act.cust_account_id
  AND act.party_id                              = hr.object_id
  AND hps.PARTY_ID(+)                           = hprel.PARTY_ID
  AND NVL(hps.IDENTIFYING_ADDRESS_FLAG(+), 'Y') = 'Y'
  AND NVL(hps.STATUS(+), 'A')                   = 'A'
  AND hprel.COUNTRY                             = ftv.TERRITORY_CODE(+)
  AND lookups.LOOKUP_TYPE (+)                   ='RESPONSIBILITY'
  AND lookups.LOOKUP_CODE(+)                    =hoc.JOB_TITLE_CODE
  AND hcar.STATUS='A'
  ) QRSLT
WHERE 
RCTA.SOLD_TO_CUSTOMER_ID=HCA.CUST_ACCOUNT_ID
AND HCA.PARTY_ID=HP.PARTY_ID
AND BA.RECEIPT_METHOD_ID(+) = RCTA.RECEIPT_METHOD_ID
--AND BA.BANK_ACCOUNT_ID(+)=RCTA.INTERFACE_HEADER_ATTRIBUTE8
----------------------------------------------
--AND RCTA.SHIP_TO_CUSTOMER_ID=HCA1.CUST_ACCOUNT_ID
--AND HCA1.PARTY_ID=HP1.PARTY_ID
--AND RCTA.SHIP_TO_SITE_USE_ID=HCS.SITE_USE_ID
--AND HCS.CUST_ACCT_SITE_ID=HCAS.CUST_ACCT_SITE_ID
------------------------------------------------
--AND RCTA.SHIP_TO_SITE_USE_ID=HCS.SITE_USE_ID
--AND HCS.CUST_ACCT_SITE_ID=HCAS.CUST_ACCT_SITE_ID
--AND HCAS.PARTY_SITE_ID=HPS.PARTY_SITE_ID
--AND HPS.LOCATION_ID=HL.LOCATION_ID
---------------------------------
AND RCTA.BILL_TO_CUSTOMER_ID=HCA2.CUST_ACCOUNT_ID
AND HCA2.PARTY_ID=HP2.PARTY_ID
AND RCTA.BILL_TO_SITE_USE_ID=HCS1.SITE_USE_ID
AND HCS1.CUST_ACCT_SITE_ID=HCAS1.CUST_ACCT_SITE_ID
----------------------------------------------
AND RCTA.BILL_TO_SITE_USE_ID=HCS1.SITE_USE_ID
AND HCS1.CUST_ACCT_SITE_ID=HCAS1.CUST_ACCT_SITE_ID
AND HCAS1.PARTY_SITE_ID=HPS1.PARTY_SITE_ID
AND HPS1.LOCATION_ID=HL1.LOCATION_ID
----------------------------------------
AND RCTA.REMIT_TO_ADDRESS_ID=HCS2.SITE_USE_ID(+)
AND HCS2.CUST_ACCT_SITE_ID=HCAS2.CUST_ACCT_SITE_ID(+)
AND HCAS2.PARTY_SITE_ID=HPS2.PARTY_SITE_ID(+)
AND HPS2.LOCATION_ID=HL2.LOCATION_ID(+)
--------------------------------------------
AND  HCA2.CUST_ACCOUNT_ID = QRSLT.CUST_ACCOUNT_ID(+) 
-----------------------------------------
AND RCTL.CUSTOMER_TRX_ID=RCTA.CUSTOMER_TRX_ID
AND RCTA.CUSTOMER_TRX_ID = NVL(:P_CUSTOMER_TRX_ID , RCTA.CUSTOMER_TRX_ID)
]]> 
  </sqlStatement>
  <sqlStatement name="Q_SUMMARY">
<![CDATA[
  select
   SUM(to_number(DECODE(RCTL.QUANTITY_INVOICED*RCTL.UNIT_SELLING_PRICE,NULL,RCTL.EXTENDED_AMOUNT,
   RCTL.QUANTITY_INVOICED*RCTL.UNIT_SELLING_PRICE))) TOTAL_INV_AMOUNT,
   INITCAP(XXSC_SPELL_NUMBER(sum(RCTL.EXTENDED_AMOUNT),'D')) TOTAL_INV_AMOUNT_DESC
FROM
RA_CUSTOMER_TRX_ALL RCTA,
HZ_PARTIES HP,
HZ_CUST_ACCOUNTS HCA,
(SELECT 
CBA.BANK_ACCOUNT_NUM ||' (IBAN # '|| CBA.IBAN_NUMBER||' '|| CBBV.BANK_NAME||' '||CBBV.BANK_BRANCH_NAME||' UAE '||CBBV.BANK_BRANCH_TYPE||' Code: '|| CBBV.EFT_SWIFT_CODE||' '|| CBBV.EFT_USER_NUMBER||' )'  BANK_ACCOUNT,
CBA.BANK_ACCOUNT_NUM ,
 CBA.IBAN_NUMBER,
 CBBV.BANK_NAME,
 CBBV.BANK_BRANCH_NAME,
 CBBV.BANK_BRANCH_TYPE,
 CBBV.EFT_SWIFT_CODE,
 CBBV.EFT_USER_NUMBER,
 ARMCA.RECEIPT_METHOD_ID
FROM AR_RECEIPT_METHOD_ACCOUNTS_ALL ARMCA , CE_BANK_ACCT_USES_ALL CBAUA, CE_BANK_ACCOUNTS CBA,  CE_BANK_BRANCHES_V CBBV
WHERE  ARMCA.REMIT_BANK_ACCT_USE_ID = CBAUA.BANK_ACCT_USE_ID
AND   CBAUA.BANK_ACCOUNT_ID = CBA.BANK_ACCOUNT_ID
AND    CBA.BANK_BRANCH_ID = CBBV.PK_ID) BA,
HZ_CUST_SITE_USES_ALL HCS1,
HZ_CUST_ACCT_SITES_ALL HCAS1,
HZ_LOCATIONS HL1,
HZ_PARTY_SITES HPS1,
---------------------------
RA_CUSTOMER_TRX_LINES_ALL RCTL,
--MTL_SYSTEM_ITEMS_B MSIB,
HZ_CUST_SITE_USES_ALL HCS2,
HZ_CUST_ACCT_SITES_ALL HCAS2,
HZ_LOCATIONS HL2,
HZ_PARTY_SITES HPS2,
---------------------
--HZ_PARTIES HP1,
--HZ_CUST_ACCOUNTS HCA1,
-------------------------
HZ_PARTIES HP2,
HZ_CUST_ACCOUNTS HCA2,
--------------------------

  (SELECT hcar.CUST_ACCOUNT_ROLE_ID AS CARI,
    hcar.PARTY_ID,
    hcar.CUST_ACCOUNT_ID,
    hcar.CURRENT_ROLE_STATE,
    hcar.CUST_ACCT_SITE_ID,
    hcar.PRIMARY_FLAG,
    hcar.ROLE_TYPE,
    hcar.SOURCE_CODE,
    hcar.ORIG_SYSTEM_REFERENCE,
    hcar.STATUS,
    Initcap(hpsub.person_pre_name_adjunct) TITLE,
    hpsub.PARTY_NAME,
    hps.LOCATION_ID,
    hprel.PRIMARY_PHONE_COUNTRY_CODE,
    hprel.PRIMARY_PHONE_AREA_CODE,
    hprel.PRIMARY_PHONE_NUMBER,
    hprel.PRIMARY_PHONE_EXTENSION,
    hprel.PRIMARY_PHONE_LINE_TYPE,
    hprel.EMAIL_ADDRESS,
    hoc.JOB_TITLE,
    hps.MAILSTOP,
    ftv.TERRITORY_SHORT_NAME  AS COUNTRY,
    hps.ORIG_SYSTEM_REFERENCE AS PS_REFERENCE,
    hpsub.PARTY_ID            AS SUB_PARTY_ID,
    hpsub.PARTY_TYPE,
    hprel.PARTY_ID AS REL_PARTY_ID,
    hr.RELATIONSHIP_ID,
    lookups.meaning JOB_TITLE_CODE,
    hoc.contact_number ,
    HZ_UTILITY_V2PUB.get_lookupmeaning ( 'FND_LOOKUP_VALUES' , 'HZ_CPUI_REGISTRY_STATUS' , hcar.STATUS ) AS CONTACT_STATUS_MEANING
  FROM HZ_CUST_ACCOUNT_ROLES hcar,
    HZ_PARTIES hpsub,
    HZ_PARTIES hprel,
    HZ_ORG_CONTACTS hoc,
    HZ_RELATIONSHIPS hr,
    HZ_PARTY_SITES hps,
    FND_TERRITORIES_VL ftv,
    fnd_lookup_values_vl lookups,
    hz_cust_accounts act
  WHERE -- hcar.CUST_ACCOUNT_ID                    = :1 --1111 MENACORP  AND 
  hcar.ROLE_TYPE                            = 'CONTACT'
  AND hcar.PARTY_ID                             = hr.PARTY_ID
  AND hr.PARTY_ID                               = hprel.PARTY_ID
  AND hr.SUBJECT_ID                             = hpsub.PARTY_ID
  AND hoc.PARTY_RELATIONSHIP_ID                 = hr.RELATIONSHIP_ID
  AND hcar.cust_account_id                      =act.cust_account_id
  AND act.party_id                              = hr.object_id
  AND hps.PARTY_ID(+)                           = hprel.PARTY_ID
  AND NVL(hps.IDENTIFYING_ADDRESS_FLAG(+), 'Y') = 'Y'
  AND NVL(hps.STATUS(+), 'A')                   = 'A'
  AND hprel.COUNTRY                             = ftv.TERRITORY_CODE(+)
  AND lookups.LOOKUP_TYPE (+)                   ='RESPONSIBILITY'
  AND lookups.LOOKUP_CODE(+)                    =hoc.JOB_TITLE_CODE
  AND hcar.STATUS='A'
  ) QRSLT
WHERE 
RCTA.SOLD_TO_CUSTOMER_ID=HCA.CUST_ACCOUNT_ID
AND HCA.PARTY_ID=HP.PARTY_ID
AND BA.RECEIPT_METHOD_ID(+) = RCTA.RECEIPT_METHOD_ID
--AND BA.BANK_ACCOUNT_ID(+)=RCTA.INTERFACE_HEADER_ATTRIBUTE8
----------------------------------------------
--AND RCTA.SHIP_TO_CUSTOMER_ID=HCA1.CUST_ACCOUNT_ID
--AND HCA1.PARTY_ID=HP1.PARTY_ID
--AND RCTA.SHIP_TO_SITE_USE_ID=HCS.SITE_USE_ID
--AND HCS.CUST_ACCT_SITE_ID=HCAS.CUST_ACCT_SITE_ID
------------------------------------------------
--AND RCTA.SHIP_TO_SITE_USE_ID=HCS.SITE_USE_ID
--AND HCS.CUST_ACCT_SITE_ID=HCAS.CUST_ACCT_SITE_ID
--AND HCAS.PARTY_SITE_ID=HPS.PARTY_SITE_ID
--AND HPS.LOCATION_ID=HL.LOCATION_ID
---------------------------------
AND RCTA.BILL_TO_CUSTOMER_ID=HCA2.CUST_ACCOUNT_ID
AND HCA2.PARTY_ID=HP2.PARTY_ID
AND RCTA.BILL_TO_SITE_USE_ID=HCS1.SITE_USE_ID
AND HCS1.CUST_ACCT_SITE_ID=HCAS1.CUST_ACCT_SITE_ID
----------------------------------------------
AND RCTA.BILL_TO_SITE_USE_ID=HCS1.SITE_USE_ID
AND HCS1.CUST_ACCT_SITE_ID=HCAS1.CUST_ACCT_SITE_ID
AND HCAS1.PARTY_SITE_ID=HPS1.PARTY_SITE_ID
AND HPS1.LOCATION_ID=HL1.LOCATION_ID
----------------------------------------
AND RCTA.REMIT_TO_ADDRESS_ID=HCS2.SITE_USE_ID(+)
AND HCS2.CUST_ACCT_SITE_ID=HCAS2.CUST_ACCT_SITE_ID(+)
AND HCAS2.PARTY_SITE_ID=HPS2.PARTY_SITE_ID(+)
AND HPS2.LOCATION_ID=HL2.LOCATION_ID(+)
--------------------------------------------
AND  HCA2.CUST_ACCOUNT_ID = QRSLT.CUST_ACCOUNT_ID(+) 
-----------------------------------------
AND RCTL.CUSTOMER_TRX_ID=RCTA.CUSTOMER_TRX_ID
AND RCTA.CUSTOMER_TRX_ID = NVL(:P_CUSTOMER_TRX_ID , RCTA.CUSTOMER_TRX_ID)
]]> 
  </sqlStatement>
  </dataQuery>
  <dataStructure>
<group name="G_AR_INV_DETAILS_GROUP" dataType="varchar2" source="Q_EMP_DETAILS">
   <element name="CLASS"   dataType="VARCHAR2"    value="CLASS" />
   <element name="TRX_NUMBER"   dataType="VARCHAR2"    value="TRX_NUMBER" />
   <element name="CONTACT_TITLE"   dataType="VARCHAR2"    value="CONTACT_TITLE" />
   <element name="CONTACT_NAME"    dataType="VARCHAR2"     value="CONTACT_NAME" />
   <element name="PAYMENT_TERM"    dataType="VARCHAR2"     value="PAYMENT_TERM" />
   <element name="BILL_TO_CUSTOMER_NAME"   dataType="VARCHAR2"    value="BILL_TO_CUSTOMER_NAME" />
   <element name="ACCOUNT_NUMBER"   dataType="VARCHAR2"    value="ACCOUNT_NUMBER" />
   <element name="BANK_ACCOUNT"   dataType="VARCHAR2"    value="BANK_ACCOUNT" />
   <element name="BANK_ACCOUNT_NUM"   dataType="VARCHAR2"    value="BANK_ACCOUNT_NUM" />
   <element name="IBAN_NUMBER"   dataType="VARCHAR2"    value="IBAN_NUMBER" />
   <element name="BANK_NAME"   dataType="VARCHAR2"    value="BANK_NAME" />
   <element name="EFT_SWIFT_CODE"   dataType="VARCHAR2"    value="EFT_SWIFT_CODE" />
   <element name="BANK_BRANCH_NAME"   dataType="VARCHAR2"    value="BANK_BRANCH_NAME" />
   <element name="BANK_BRANCH_TYPE"   dataType="VARCHAR2"    value="BANK_BRANCH_TYPE" />
   <element name="TRX_DATE"   dataType="VARCHAR2"    value="TRX_DATE" />
   <element name="TERM_DUE_DATE"   dataType="VARCHAR2"    value="TERM_DUE_DATE" />
   <element name="SHIP_CUST_NAME"   dataType="VARCHAR2"    value="SHIP_CUST_NAME" />
   <element name="SHIP_TO_LOC"   dataType="VARCHAR2"    value="SHIP_TO_LOC" />
   <element name="SHIP_TO_ADDR5"   dataType="VARCHAR2"    value="SHIP_TO_ADDR5" />
   <element name="SHIP_TO_ADDR1"   dataType="VARCHAR2"    value="SHIP_TO_ADDR1" />
   <element name="COMMENTS"   dataType="VARCHAR2"    value="COMMENTS" />
   <element name="BILL_TO_LOC"   dataType="VARCHAR2"    value="BILL_TO_LOC" />
   <element name="BILL_TO_ADDRESS1"   dataType="VARCHAR2"    value="BILL_TO_ADDRESS1" />
   <element name="BILL_TO_ADDR2"   dataType="VARCHAR2"    value="BILL_TO_ADDR2" />
   <element name="BILL_TO_ADDR3"   dataType="VARCHAR2"    value="BILL_TO_ADDR3" />
   <element name="BILL_TO_ADDR4"   dataType="VARCHAR2"    value="BILL_TO_ADDR4" />
   <element name="BILL_TO_ADDR5"   dataType="VARCHAR2"    value="BILL_TO_ADDR5" />
   <element name="BILL_TO_ADDR5"   dataType="VARCHAR2"    value="BILL_TO_ADDR5" />
   <element name="REMIT_TO_LOC"   dataType="VARCHAR2"    value="REMIT_TO_LOC" />
   <element name="REMIT_TO_ADDR1"   dataType="VARCHAR2"    value="REMIT_TO_ADDR1" />
   <element name="REMIT_TO_ADDR5"   dataType="VARCHAR2"    value="REMIT_TO_ADDR5" />
   <element name="LINE_NUMBER"   dataType="VARCHAR2"    value="LINE_NUMBER" />
   <element name="ITEM_NAME"   dataType="VARCHAR2"    value="ITEM_NAME" />
   <element name="UOM_CODE"   dataType="VARCHAR2"    value="UOM_CODE" />
   <element name="QUANTITY_INVOICED"   dataType="NUMBER"    value="QUANTITY_INVOICED" />
   <element name="UNIT_SELLING_PRICE"   dataType="NUMBER"    value="UNIT_SELLING_PRICE" />
   <element name="LINE_TYPE"   dataType="VARCHAR2"    value="LINE_TYPE" />
   <element name="LINE_PRICE"   dataType="NUMBER"    value="LINE_PRICE" />
   <element name="EXTENDED_AMOUNT"   dataType="NUMBER"    value="EXTENDED_AMOUNT" />
   <element name="TOTAMT"   dataType="NUMBER"    value="TOTAMT" />
   <element name="TOTAMT_TEXT"   dataType="VARCHAR2"    value="TOTAMT_TEXT" />
   <element name="INVOICE_CURRENCY_CODE" dataType="VARCHAR2"    value="INVOICE_CURRENCY_CODE" />
   <element name="ATTACHMENT_EXIST" dataType="VARCHAR2"    value="ATTACHMENT_EXIST" />
   <element name="COMPLETE_FLAG" dataType="VARCHAR2"    value="COMPLETE_FLAG" />
   <group name="G_AR_DTL_GROUP" dataType="varchar2" source="Q_EMP_DETAILS">
       <element name="LINE_DESCRIPTION" dataType="VARCHAR2"    value="LINE_DESCRIPTION" />
       <element name="LINE_AMOUNT" dataType="NUMBER"    value="LINE_AMOUNT" />
   </group>
</group>
   <group name="G_AR_SUM_GROUP" dataType="varchar2" source="Q_SUMMARY">
       <element name="TOTAL_INV_AMOUNT" dataType="NUMBER"    value="TOTAL_INV_AMOUNT" />
       <element name="TOTAL_INV_AMOUNT_DESC" dataType="VARCHAR2"    value="TOTAL_INV_AMOUNT_DESC" />
   </group>
  <element name="CURRENT_DATE"			dataType="date"		value="XXSC_AR_INVOICE.GET_CURRENT_DATE" /> 
  <element name="OPERATING_UNIT"		dataType="varchar2" value="XXSC_AR_INVOICE.GET_OPERATING_UNIT" /> 
  </dataStructure>
   </dataTemplate>